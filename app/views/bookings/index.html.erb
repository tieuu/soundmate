<div class="home-body">
  <div class="d-flex justify-content-center align-items-center" id="short">
    <div class="col-6">
      <h1 class="banner">My bookings</h1>
    </div>
  </div>

  <div class="container">
    <div class="row">
      <% @bookings.select { |booking| booking.user == current_user }.sort_by{ |booking| booking.start_date }.each do |booking| %>
        <div class="col-12">
          <div class="card-product">
            <% unless booking.equipment.photos.attached? %>
              <%= cl_image_tag('nd6mdgkmkyp5fok5ig9n.png', crop: :fill) %>
            <% else %>
              <%= cl_image_tag(booking.equipment.photos.first.key, crop: :fill) %>
            <% end %>
            <div class="card-product-infos">
              <%= link_to equipment_path(booking.equipment), class: 'no-decoration' do %>
                <h2><%= booking.equipment.ad_name %></h2>
                <p><%= booking.equipment.category.capitalize %> from <%= booking.equipment.user.name.capitalize %></p>
                <p><%= l(booking.start_date.to_date, format: :long) %> to <%= l(booking.end_date.to_date, format: :long) %></p>
                <p><%= ActiveSupport::NumberHelper.number_to_currency((booking.equipment.price * (booking.end_date.to_date - booking.start_date.to_date + 1)).round, locale: :ja) %></p>
              <% end %>
              <div class="row mt-3">
                <h2 class='mx-3'><%= booking.status.capitalize %></h2>
                <% if booking.status.downcase == 'pending' %>
                  <%= simple_form_for booking, method: 'patch' do |f| %>
                    <%= f.hidden_field :status, value: 'cancelled' %>
                    <button type="submit" class='btn btn-outline-warning btn-md mx-3'>Cancel</button>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
